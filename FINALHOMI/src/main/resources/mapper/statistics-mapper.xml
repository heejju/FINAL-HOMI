<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org/DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="statisticsMapper">
	<select id="getMemberCount" resultType="_int">
		SELECT COUNT(*)
		FROM MEMBER
		WHERE M_STATUS ='N'
	</select>
	
	<select id="getLectureCount" resultType="_int">
		SELECT COUNT(*)
		FROM LECTURE
			JOIN BOARD USING (POST_NO)
		WHERE DELETE_YN = 'N'
	</select>
	
	<select id="getVisitCount" resultType="_int">
		SELECT NVL(SUM(COUNT_VISIT), 0)
		FROM STATICS
	</select>
	
	<select id="getTeacherCount" resultType="_int">
		SELECT COUNT(*)
		FROM MEMBER
		WHERE M_STATUS ='N' AND M_KIND = 2
	</select>
	
	<select id="getStudentCount" resultType="_int">
		SELECT COUNT(*)
		FROM MEMBER
		WHERE M_STATUS ='N' AND M_KIND = 1
	</select>
	
	<select id="getArtCount" resultType="_int">
		<![CDATA[
			SELECT COUNT(*)
			FROM LECTURE
			WHERE HOBBY_NO > 55 AND HOBBY_NO < 65
		]]>
	</select>
	<select id="getCraftsCount" resultType="_int">
		<![CDATA[
			SELECT COUNT(*)
			FROM LECTURE
			WHERE HOBBY_NO = 55
		]]>
	</select>
	<select id="getMusicCount" resultType="_int">
		<![CDATA[
			SELECT COUNT(*)
			FROM LECTURE
			WHERE HOBBY_NO > 22 AND HOBBY_NO < 43
		]]>
	</select>
	<select id="getDesignCount" resultType="_int">
		<![CDATA[
			SELECT COUNT(*)
			FROM LECTURE
			WHERE HOBBY_NO > 0 AND HOBBY_NO < 16
		]]>
	</select>
	<select id="getPictureCount" resultType="_int">
		<![CDATA[
			SELECT COUNT(*)
			FROM LECTURE
			WHERE HOBBY_NO > 15 AND HOBBY_NO < 23
		]]>
	</select>
	<select id="getCookCount" resultType="_int">
		<![CDATA[
			SELECT COUNT(*)
			FROM LECTURE
			WHERE HOBBY_NO > 42 AND HOBBY_NO < 55
		]]>
	</select>
	<select id="getDanceCount" resultType="_int">
		<![CDATA[
			SELECT COUNT(*)
			FROM LECTURE
			WHERE HOBBY_NO > 54 AND HOBBY_NO < 73
		]]>
	</select>
	<select id="getSportsCount" resultType="_int">
		<![CDATA[
			SELECT COUNT(*)
			FROM LECTURE
			WHERE HOBBY_NO > 72
		]]>
	</select>
	<select id="selectList" resultMap="StatisticsResultSet">
		SELECT *
		FROM STATICS
		WHERE TO_CHAR(COUNT_DATE,'YYYYMM') = #{yearMonth}
	</select>
	
	<resultMap type="Statistics" id="StatisticsResultSet">
		<id property="sysdate" column="COUNT_DATE"/>
		<result property="memberCount" column="COUNT_USER"/>
		<result property="visitCount" column="COUNT_VISIT"/>
		<result property="lectureCount" column="COUNT_CLASS"/>
		<result property="conLectureCount" column="COUNT_CONCLUDED"/>
	</resultMap>
	
	<select id="getArtCount2" resultType="_int">
		<![CDATA[
			SELECT COUNT(*)
			FROM CONCLUSION
                JOIN LECTURE USING(POST_NO)
			WHERE HOBBY_NO > 55 AND HOBBY_NO < 65
		]]>
	</select>
	<select id="getCraftsCount2" resultType="_int">
		<![CDATA[
			SELECT COUNT(*)
			FROM CONCLUSION
                JOIN LECTURE USING(POST_NO)
			WHERE HOBBY_NO = 55
		]]>
	</select>
	<select id="getMusicCount2" resultType="_int">
		<![CDATA[
			SELECT COUNT(*)
			FROM CONCLUSION
                JOIN LECTURE USING(POST_NO)
			WHERE HOBBY_NO > 22 AND HOBBY_NO < 43
		]]>
	</select>
	<select id="getDesignCount2" resultType="_int">
		<![CDATA[
			SELECT COUNT(*)
			FROM CONCLUSION
                JOIN LECTURE USING(POST_NO)
			WHERE HOBBY_NO > 0 AND HOBBY_NO < 16
		]]>
	</select>
	<select id="getPictureCount2" resultType="_int">
		<![CDATA[
			SELECT COUNT(*)
			FROM CONCLUSION
                JOIN LECTURE USING(POST_NO)
			WHERE HOBBY_NO > 15 AND HOBBY_NO < 23;
		]]>
	</select>
	<select id="getCookCount2" resultType="_int">
		<![CDATA[
			SELECT COUNT(*)
			FROM CONCLUSION
                JOIN LECTURE USING(POST_NO)
			WHERE HOBBY_NO > 42 AND HOBBY_NO < 55
		]]>
	</select>
	<select id="getDanceCount2" resultType="_int">
		<![CDATA[
			SELECT COUNT(*)
			FROM CONCLUSION
                JOIN LECTURE USING(POST_NO)
			WHERE HOBBY_NO > 54 AND HOBBY_NO < 73
		]]>
	</select>
	<select id="getSportsCount2" resultType="_int">
		<![CDATA[
			SELECT COUNT(*)
			FROM CONCLUSION
                JOIN LECTURE USING(POST_NO)
			WHERE HOBBY_NO > 72
		]]>
	</select>
	
	
</mapper>
